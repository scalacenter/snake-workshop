<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<title data-react-helmet="true">Workshop instructions | Snake Workshop</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://scalacenter.github.io//snake-workshop/docs/snake/step-by-step"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Workshop instructions | Snake Workshop"><meta data-react-helmet="true" name="description" content="Structure"><meta data-react-helmet="true" property="og:description" content="Structure"><link data-react-helmet="true" rel="shortcut icon" href="/snake-workshop/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scalacenter.github.io//snake-workshop/docs/snake/step-by-step"><link data-react-helmet="true" rel="alternate" href="https://scalacenter.github.io//snake-workshop/docs/snake/step-by-step" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scalacenter.github.io//snake-workshop/docs/snake/step-by-step" hreflang="x-default"><link rel="stylesheet" href="/snake-workshop/assets/css/styles.6d8b0ba6.css">
<link rel="preload" href="/snake-workshop/assets/js/runtime~main.e224a603.js" as="script">
<link rel="preload" href="/snake-workshop/assets/js/main.f3a09ad8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/snake-workshop/"><div class="navbar__logo"><img src="/snake-workshop/img/snake.png" alt="Snake" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/snake-workshop/img/snake.png" alt="Snake" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Snake Workshop</b></a><a class="navbar__item navbar__link navbar__link--active" href="/snake-workshop/docs/installation/intro">Install Party</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scalacenter/snake-workshop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Install Party</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Snake Game</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/snake-workshop/docs/snake/setup">Project setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/snake-workshop/docs/snake/scala-basics">Introduction to Scala</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/snake-workshop/docs/snake/step-by-step">Workshop instructions</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Workshop instructions</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="structure">Structure<a aria-hidden="true" class="hash-link" href="#structure" title="Direct link to heading">â€‹</a></h2><p>The code is written in three files:</p><ul><li><code>src/main/scala/Snake.scala</code>: logic of the game, <strong>you will work only this file</strong></li><li><code>src/main/scala/Launcher.scala</code>: logic to start the game. This file is provided</li><li><code>src/main/scala/Painter.scala</code>: logic to draw the terrain and snake on the screen. This file is provided</li><li><code>index.html</code>: the web page that contains the game. Open this file in Firefox/Chrome/Safari to play</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-to-compile-and-run">How to compile and run<a aria-hidden="true" class="hash-link" href="#how-to-compile-and-run" title="Direct link to heading">â€‹</a></h2><ol><li>Start a <code>sbt</code> shell. </li><li>To run the game, execute the task <code>fastLinkJS</code>. This will compile the Scala code into a Javascript file which you can find in <code>target/scala-3.0.2/snake-fastopt/main.js</code>.</li><li>Open <code>index.html</code> in your browser of choice, this file loads the Javascript produced in the previous step and runs it.</li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="logic-overview">Logic overview<a aria-hidden="true" class="hash-link" href="#logic-overview" title="Direct link to heading">â€‹</a></h2><p>The state of the game at any given time is represented by the <code>World</code> case class</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">case class World(snake: Snake, fruit: Fruit, size: Size)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>in other words, each object of type <code>World</code> is a photograph of the state of the
game. It contains a snake, a fruit, and the dimensions of the world (width and
height).</p><p>A snake is made up of blocks. Each block has <code>x</code> and <code>y</code> coordinates.  All of
the blocks of a snake are collected into a list.  The snake also contains the
direction in which it is moving.</p><p>The goal of this workshop is to implement the <code>updateGame</code> function which,
provided the previous state of the game and the action of the player, returns
the next state of the world.</p><p>The code in <code>Launcher.scala</code> creates a fresh world and every 250 milliseconds
calls <code>nextWorld</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="the-grid">The grid<a aria-hidden="true" class="hash-link" href="#the-grid" title="Direct link to heading">â€‹</a></h3><p>The game can be represented as a table, or grid. Each element of the grid can be
empty, occupied by a fruit or by a block of the snake.  The dimensions of the
grid are specified in the <code>size</code> attribute of the case class
(<code>world.size.width</code>, <code>world.size.height</code>):</p><ul><li><code>height</code> is the number of rows of the grid. We will use of the convention of naming <code>y</code> the variables indicating vertical position</li><li><code>width</code> is the number of columns of the grid. We will use of the convention of naming <code>x</code> the variables indicating horizontal position</li><li>The top left corner of the grid has position <code>(x=0, y=0)</code></li><li>The top right corner of the grid has position <code>(x=width-1, y=0)</code></li><li>The bottom left corner of the grid has position <code>(x=0, y=height-1)</code></li><li>The bottom right corner of the grid has position <code>(x=width-1, y=height-1)</code></li></ul><p><img alt="the grid" src="/snake-workshop/assets/images/grid-6a95aca42b5b9c59856f2030be90fb1e.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="a-world-example">A World example<a aria-hidden="true" class="hash-link" href="#a-world-example" title="Direct link to heading">â€‹</a></h3><p><img alt="world example" src="/snake-workshop/assets/images/worldexample-26e438cdfaf01bb9500fccf7ca6075bd.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="part-1-growing-the-snake">Part 1: Growing the snake<a aria-hidden="true" class="hash-link" href="#part-1-growing-the-snake" title="Direct link to heading">â€‹</a></h2><p>Here you will implement the eating logic of the snake.  If the snake&#x27;s head
comes in contact with the fruit, then its tail grows one block in length.  To check if the
head (a <code>Block</code>) is in contact with the fruit, we can compare it with the position
of the fruit (its underlying <code>Block</code>).  Remark that we are comparing two objects with the
same type (<code>Block</code>).</p><p>Start by implementing the <code>eatsFruit</code> function.</p><p>You can then move to the <code>nextTail</code> functions which creates the new tail of the snake.
To do this, we need to understand how the snake moves:</p><p><img alt="movement" src="/snake-workshop/assets/images/movement-88b978769c75533bb2d0dae0c05bbee7.png"></p><p>at each step, the head of the snake is computed (you will do this in Part 3).
The new head is added at beginning of the <code>body</code> list of the snake.  Then the
last block of the snake is removed to obtain the illusion of movement: the
number of blocks is constant but the position has changed. When the snake has
eaten a fruit, we still need to compute a new head, but the number of blocks
grows by 1. In this case, we do not need to remove the last block of the snake.</p><p>Implement the function <code>nextTail</code> which handles both situations: when the snake
has eaten and it needs to grow, <code>isEating</code> is set to <code>true</code> otherwise, when it
is <code>false</code> you need to implement the movement logic described above. Make sure
you have a look at the <a href="/snake-workshop/docs/snake/docs/snake/scala-basics">Scala basics</a> page to know how to manipulate lists.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="part-2-reacting-to-players-input">Part 2: Reacting to player&#x27;s input<a aria-hidden="true" class="hash-link" href="#part-2-reacting-to-players-input" title="Direct link to heading">â€‹</a></h2><p>You will now implement two functions, <code>opposite</code> and <code>nextDirection</code> so that you
can modify the direction of movement of the snake when the player changes it
with the arrow keys.</p><p>Start with <code>opposite</code>, which you will need for <code>nextDirection</code>. This function
returns the direction which is opposite to the one it receives. So for example
if it receives <code>Direction.Left</code> it will produce <code>Direction.Right</code>.  Use pattern
matching (as described in <a href="/snake-workshop/docs/snake/docs/snake/scala-basics">Scala basics</a>)</p><p>After that you can move to <code>nextDirection</code>. Here you will use pattern matching again,
this time on <code>Option</code>, to compute the next direction of the snake.
If the user changed the direction, then <code>inputDirection</code> will be <code>Some(...)</code> and you need
to adopt the direction in it. Otherwise you maintain (return) the current direction.</p><p>You need to be careful: at any time the snake can adopt three new directions,
<strong>the head cannot go inside the body</strong>. If the user requests this impossible
direction, you must keep the current direction.</p><p><img alt="not all directions are possible" src="/snake-workshop/assets/images/nextdirection-438419e9baeda8c7f3e3e7295d15b657.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="part-3-moving-the-head">Part 3: Moving the head<a aria-hidden="true" class="hash-link" href="#part-3-moving-the-head" title="Direct link to heading">â€‹</a></h2><p>In this part you will update the next position of the head of the snake.</p><p>First, implement the <code>wrapY</code> function, similarly to the <code>wrapX</code> above it.
This functions is needed so that when the snake goes against the top border of
the grid, it appears on the bottom of the grid going up.  You can see an example
of the <code>wrapX</code> function:</p><p><img alt="wrapx" src="/snake-workshop/assets/images/wrapx-0ee1f23257160b13394046ce3082812c.png"></p><p>You can now work on the <code>nextHead</code> function. Its goal is to create the new head
of the <code>snake</code> it receives as argument. The position of the new head will depend
on the argument <code>nextDirection</code>. You will create a new <code>Block</code> with the <code>x</code> and
<code>y</code> attributes derived from those of the head of the snake.  Remember the
example grid at the beginning of this page: going right means increasing the <code>x</code>
component while the <code>y</code> component stays unchanged; going down means increasing
the <code>y</code> component while the <code>x</code> component stays unchanged.</p><p>You will need the <code>wrapY</code> and <code>wrapX</code> functions in <code>nextHead</code>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="part-4-updating-the-snake">Part 4: Updating the Snake<a aria-hidden="true" class="hash-link" href="#part-4-updating-the-snake" title="Direct link to heading">â€‹</a></h2><p>You now have all the functions required to update the direction, head and tail
of the snake.  Use them in <code>nextSnake</code> to create the snake updated for the next
period. In <a href="/snake-workshop/docs/snake/docs/snake/scala-basics">Scala basics</a> you will find how to combine <code>head</code> and <code>tail</code> to
create a new <code>body</code></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="part-5-updating-the-world">Part 5: Updating the world<a aria-hidden="true" class="hash-link" href="#part-5-updating-the-world" title="Direct link to heading">â€‹</a></h2><p>The only moving parts of <code>World</code> are <code>snake</code> and <code>fruit</code>. In parts 1 to 4 you
developed the tools to detect if the snake is eating and to update its attributes.  Use them
in <code>nextWorld</code> to update the snake.</p><p>You also need to update the fruit: if the snake ate it, create a new one using
the provided function <code>createRandomFruit</code>, otherwise you can reuse the existing
fruit.</p><p>With the new snake and new fruit, you can return a new <code>World</code> (its size remains unchanged).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="part-6-updating-the-game">Part 6: Updating the game<a aria-hidden="true" class="hash-link" href="#part-6-updating-the-game" title="Direct link to heading">â€‹</a></h2><p>In this last part you will handle a few possible events in the game.</p><p>Start by implementing <code>bitItself</code> which is used to check if the snake has bit
itself.</p><p><img alt="game over" src="/snake-workshop/assets/images/bititself-49220c28876e1459ab14cb2a7ac979e1.png"></p><p>This function is used in <code>updateGame</code> to check if the game is over</p><p>Finally you can implement the last three cases of the pattern match in
<code>updateGame</code>: if the user presses <code>p</code> the game is paused and the world does not
change.  Otherwise you can use the functions previously developed to update the
<code>World</code></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/scalacenter/snake-workshop/edit/website/website/docs/snake/step-by-step.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/snake-workshop/docs/snake/scala-basics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Introduction to Scala</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#structure" class="table-of-contents__link toc-highlight">Structure</a></li><li><a href="#how-to-compile-and-run" class="table-of-contents__link toc-highlight">How to compile and run</a></li><li><a href="#logic-overview" class="table-of-contents__link toc-highlight">Logic overview</a><ul><li><a href="#the-grid" class="table-of-contents__link toc-highlight">The grid</a></li><li><a href="#a-world-example" class="table-of-contents__link toc-highlight">A World example</a></li></ul></li><li><a href="#part-1-growing-the-snake" class="table-of-contents__link toc-highlight">Part 1: Growing the snake</a></li><li><a href="#part-2-reacting-to-players-input" class="table-of-contents__link toc-highlight">Part 2: Reacting to player&#39;s input</a></li><li><a href="#part-3-moving-the-head" class="table-of-contents__link toc-highlight">Part 3: Moving the head</a></li><li><a href="#part-4-updating-the-snake" class="table-of-contents__link toc-highlight">Part 4: Updating the Snake</a></li><li><a href="#part-5-updating-the-world" class="table-of-contents__link toc-highlight">Part 5: Updating the world</a></li><li><a href="#part-6-updating-the-game" class="table-of-contents__link toc-highlight">Part 6: Updating the game</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/snake-workshop/docs/installation/intro">Install Party</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/scala" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/pNUuM4gA" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitter.im/scala/center" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/scala_lang" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://scala.epfl.ch/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Scala Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/scalacenter" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Scala Center, Built with Docusaurus.</div></div></div></footer></div>
<script src="/snake-workshop/assets/js/runtime~main.e224a603.js"></script>
<script src="/snake-workshop/assets/js/main.f3a09ad8.js"></script>
</body>
</html>